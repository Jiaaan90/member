{% extends 'base.html' %}

{% block title %}<title>게시글 상세 - {{ article.pk }}. {{ article.title }}</title>{% endblock title %}

{% block css %}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<style>
	.wrap_table{
		width: 1000px;
        margin: auto;
        margin-top: 100px;
	}
	th{
		text-align: center;
	}
</style>

{% endblock css %}

{% block content %}

<div class="wrap_table">
	
	<form action="" method="POST">
	{% csrf_token %}                                     <!-- csrftoken 태그 -->
	<input type="hidden" name="action" value="{% if article %}update{% else %}create{% endif %}">   <!-- action -->
	<button class="btn btn-danger" type="submit" style="float: right;">게시글 삭제</button>
	<a href="/article/{{ article.pk }}/update/"><button class="btn btn-primary" type="button">게시글 수정</button></a> 
	<table class="table table-striped table-bordered">
		<tr>
			<th>번호</th>
			<td>{{ article.pk }}</td>
		</tr>
		<tr>
			<th>제목</th>
			<td>{{ article.title }}</td>
		</tr>
		<tr>
			<th>내용</th>
			<td style="height: 400px;">{{ article.content | linebreaksbr }}</td>
		</tr>
		<tr>
			<th>작성자</th>
			<td>{{ article.author }}</td>
		</tr>
		<tr>
			<th>작성일</th>
			<td>{{ article.created_at | date:"Y-m-d H:i"}}</td>
		</tr>
	</table>										
	</form>
	<div id="comment">
		{% for comment in post.comments.all %}
		<div class="comment-list">
			<a href="#">{{ comment.author }}</a>
			<small>{{ comment.created_date }}</small>
			<p>{{ comment.text|linebreaks }}</p>
		</div>
		{% empty %}
		<div class="comment-list">
			<div class="alert alert-info">작성 된 댓글이 없습니다.</div>
		</div>
		{% endfor %}
		</div>
		{% if request.user.is_active %}
			{% csrf_token %}
			{{ form.as_p }}
			<a href="/article/comment/{{pk}}"><button class="btn btn-primary btn-xs" type="button">댓 글 작 성</button></a>
		{% else %}
		<div class="alert alert-warning">로그인된 사용자만 댓글을 작성할 수 있습니다.</div>
		{% endif %} 	
	</div>
</div>


{% endblock content %}
